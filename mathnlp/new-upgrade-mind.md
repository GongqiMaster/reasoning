## 基于 parser 的一阶谓词逻辑结构识别的类型递进以及并列识别

### 重大变更

1. 取消多实体引入，适时添加数量实体
2. 并列实体的判断交给parser

### 流程重写

1. 检测实体类型下标，实体名称下标，谓词下标
2. 检测标准实体对，引入新实体
3. 补全自定义类型
4. （可选）短距离递进，取消类型、名称、谓词下标
5. （可选）引入和补全的下标添加、修改并补全分词和词性结果
6. 将下标列表送至parser
7. 根据parser返回进行类型递进
8. 根据parser的并列机制重置类型

### 数据结构

和parser交互的数据格式见`mathnlp_service.proto`

### 新旧迁移

python版本的旧版NER和类型递进部分存在于`intro_util.py`中，采用的是基于规则的
递进方式，并且保留了旧版的并列实体识别和多实体引入。

python版本的新版NER和基于parser的类型递进部分存在于`ner_util.py`中，其中调用了
`parser_util.py`模块来判定一阶谓词的从属，并给出了并列连词部分的判定。
另一个变化是取消了多实体引入，只保留数量词实体。

如需要使用旧版的NER部分，需要在`ltp_ner.py`中将引入的头文件替换为`intro_util.py`。

如需要使用新版的NER部分，需要在`ltp_ner.py`中将引入的头文件替换为`ner_util.py`。

推荐使用新版NER。

### 问题和代价

1. 取消多实体引入会对多解题目影响较大，如求解多解中的某个解，目前不能通过原来标注asking的方式来
达到目的，之前标注的此类题目也受到了影响。如要扩充回多个实体，建议在知识图谱这一侧做策略。
2. 旧版对并列的判断加了太多的限制，即并列的成分既要有连词相连，它们的实体类型也要保持一致。
但是这种说法是错误的，如"三角形ABC和圆O相交"，并列成分的实体类型不能相同。因此对于符号并列
之前通过"不表并列，表停顿"的说法自圆其说。新版对并列的识别迁移到parser后，对并列的认识需要有
一个较大的改变：只要有连词相连就算做并列成分，且不再要求并列的一定是相同的实体类型，这一层的限制
要放到最低。而至于什么时候需要修正并列成分的实体类型，具体策略源码中有注释。
3. 英文逗号","不再表示并列，在一个纯中文符号集中理论上也不存在英文逗号，它只应存在于$...$中。
目前的并列连词只有"和"、"与"、"、"。不过为了减少手动处理带来的问题，我们在`synonym.txt`中
将","替换成了"、"。

